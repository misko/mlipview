<!DOCTYPE html>
<html>
<head>
    <title>VR Debug Bookmarklet Generator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .bookmarklet { 
            background: #f0f0f0; 
            padding: 20px; 
            border-radius: 8px; 
            margin: 20px 0;
            border: 2px dashed #ccc;
        }
        .bookmarklet a { 
            display: block;
            background: #007acc; 
            color: white; 
            padding: 10px 20px; 
            text-decoration: none; 
            border-radius: 5px; 
            text-align: center;
            margin: 10px 0;
        }
        .instructions {
            background: #e7f3ff;
            padding: 15px;
            border-left: 4px solid #007acc;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Meta Quest VR Debug Tools</h1>
    
    <div class="instructions">
        <h3>ğŸ“‹ How to use these bookmarklets on Meta Quest:</h3>
        <ol>
            <li>On your Quest browser, bookmark this page</li>
            <li>Go to your VR app page</li>
            <li>Click on one of the bookmarklets below to debug</li>
            <li>Check the on-screen console for debug information</li>
        </ol>
    </div>
    
    <div class="bookmarklet">
        <h3>ğŸ” Object Inspector</h3>
        <p>Shows available methods on VR objects to prevent method call errors</p>
        <a href="javascript:(function(){
            if(window.vrDebug && window.vrDebug.inspectObject) {
                const obj = prompt('Enter object name to inspect (e.g., forceVis, vrUI, scene):');
                if(obj && window.vrDebug[obj]) {
                    window.vrDebug.inspectObject(window.vrDebug[obj], obj);
                } else if(obj && window[obj]) {
                    window.vrDebug.inspectObject(window[obj], obj);
                } else {
                    alert('Object not found: ' + obj);
                }
            } else {
                alert('VR Debug not available');
            }
        })();">ğŸ” Inspect Object Methods</a>
    </div>
    
    <div class="bookmarklet">
        <h3>ğŸ” VR Scene Inspector</h3>
        <p>Shows scene information, meshes, lights, and camera details</p>
        <a href="javascript:(function(){
            if(window.vrDebug && window.vrDebug.debugInfo) {
                window.vrDebug.debugInfo();
            } else if(window.vrDebug && window.vrDebug.scene) {
                const s = window.vrDebug.scene;
                alert('Scene: ' + s.meshes.length + ' meshes, ' + s.lights.length + ' lights');
            } else {
                alert('VR Debug not available. Make sure VR app is running.');
            }
        })();">ğŸ” Inspect VR Scene</a>
    </div>
    
    <div class="bookmarklet">
        <h3>ğŸ’¡ Emergency Lighting</h3>
        <p>Adds bright lighting if scene appears black</p>
        <a href="javascript:(function(){
            if(window.vrDebug && window.vrDebug.scene) {
                const scene = window.vrDebug.scene;
                const light = new BABYLON.HemisphericLight('emergency', new BABYLON.Vector3(0,1,0), scene);
                light.intensity = 2.0;
                light.diffuse = new BABYLON.Color3(1,1,1);
                alert('Emergency light added!');
            } else {
                alert('VR scene not available');
            }
        })();">ğŸ’¡ Add Emergency Light</a>
    </div>
    
    <div class="bookmarklet">
        <h3>ğŸ“¦ Test Cube</h3>
        <p>Creates a red test cube to verify rendering is working</p>
        <a href="javascript:(function(){
            if(window.vrDebug && window.vrDebug.scene) {
                const scene = window.vrDebug.scene;
                const cube = BABYLON.MeshBuilder.CreateBox('testCube', {size: 2}, scene);
                cube.position = new BABYLON.Vector3(0, 0, -5);
                const mat = new BABYLON.StandardMaterial('testMat', scene);
                mat.diffuseColor = new BABYLON.Color3(1, 0, 0);
                mat.emissiveColor = new BABYLON.Color3(0.3, 0, 0);
                cube.material = mat;
                alert('Red test cube created at (0,0,-5)');
            } else {
                alert('VR scene not available');
            }
        })();">ğŸ“¦ Create Test Cube</a>
    </div>
    
    <div class="bookmarklet">
        <h3>ğŸ”¢ MLIP Compute Counter</h3>
        <p>Shows how many times expensive physics calculations have been performed</p>
        <a href="javascript:(function(){
            if(window.vrDebug && window.vrDebug.mol && window.vrDebug.mol.atoms) {
                // Try to find the compute count from the MLIP instance
                let computeCount = 'Unknown';
                try {
                    // Access the MLIP compute counter through console logs
                    const logs = [];
                    const originalConsoleLog = console.log;
                    console.log = function(...args) {
                        logs.push(args.join(' '));
                        originalConsoleLog.apply(console, arguments);
                    };
                    
                    // Trigger a compute to see the current count
                    if(window.vrDebug.mlip) {
                        window.vrDebug.mlip.compute();
                    }
                    
                    console.log = originalConsoleLog;
                    
                    // Find the count in the logs
                    const lastLog = logs[logs.length - 1] || '';
                    const match = lastLog.match(/#(\d+)/);
                    if(match) {
                        computeCount = match[1];
                    }
                } catch(e) {
                    computeCount = 'Error: ' + e.message;
                }
                
                alert('MLIP Compute Count: ' + computeCount + '\\n\\nThis should be LOW if caching is working!\\nOnly increases when atoms move or bonds rotate.');
            } else {
                alert('VR Debug not available or molecule not loaded');
            }
        })();">ğŸ”¢ Show MLIP Compute Count</a>
    </div>
    
    <div class="bookmarklet">
        <h3>âš¡ Performance Mode Toggle</h3>
        <p>Toggles performance optimizations to reduce lag</p>
        <a href="javascript:(function(){
            if(window.vrDebug && window.vrDebug.scene) {
                // Toggle performance optimizations
                const scene = window.vrDebug.scene;
                scene.skipPointerMovePicking = !scene.skipPointerMovePicking;
                scene.skipFrustumClipping = !scene.skipFrustumClipping;
                
                // Reduce mesh quality
                scene.meshes.forEach(m => {
                    if(m.material && m.material.wireframe !== undefined) {
                        // Toggle wireframe for performance
                        m.material.wireframe = !m.material.wireframe;
                    }
                });
                
                alert('Performance mode toggled');
            } else {
                alert('VR scene not available');
            }
        })();">âš¡ Toggle Performance Mode</a>
    </div>
    
    <div class="bookmarklet">
        <h3>ğŸ“Š Performance Stats</h3>
        <p>Shows FPS and rendering statistics</p>
        <a href="javascript:(function(){
            if(window.vrDebug && window.vrDebug.engine) {
                const engine = window.vrDebug.engine;
                const fps = engine.getFps();
                const drawCalls = engine.drawCalls;
                alert('FPS: ' + fps.toFixed(1) + ', Draw calls: ' + drawCalls);
            } else {
                alert('VR engine not available');
            }
        })();">ğŸ“Š Show Performance</a>
    </div>
    
    <div class="bookmarklet">
        <h3>ğŸ¯ Camera Info</h3>
        <p>Shows camera position and target information</p>
        <a href="javascript:(function(){
            if(window.vrDebug && window.vrDebug.scene && window.vrDebug.scene.activeCamera) {
                const cam = window.vrDebug.scene.activeCamera;
                const pos = cam.position;
                const target = cam.target || 'N/A';
                alert('Camera: ' + cam.constructor.name + '\\nPos: (' + pos.x.toFixed(2) + ', ' + pos.y.toFixed(2) + ', ' + pos.z.toFixed(2) + ')\\nTarget: ' + target);
            } else {
                alert('Camera not available');
            }
        })();">ğŸ¯ Show Camera Info</a>
    </div>
    
    <div class="instructions">
        <h3>ğŸ› ï¸ Advanced Debugging:</h3>
        <p>If you have USB debugging enabled, you can also:</p>
        <ul>
            <li>Connect Quest to PC via USB</li>
            <li>Open Chrome and go to <code>chrome://inspect</code></li>
            <li>Find your Quest browser and click "Inspect"</li>
            <li>Use full Chrome DevTools for detailed debugging</li>
        </ul>
    </div>
    
    <script>
        // Auto-generate bookmarklet URLs for easy copying
        document.addEventListener('DOMContentLoaded', function() {
            console.log('VR Debug Bookmarklets loaded');
            console.log('Drag the links above to your bookmarks bar');
        });
    </script>
</body>
</html>
